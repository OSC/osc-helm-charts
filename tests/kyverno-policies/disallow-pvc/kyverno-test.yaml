---
apiVersion: cli.kyverno.io/v1alpha1
kind: Test
metadata:
  name: disallow-pvc
policies:
  - policy.yaml
resources:
  - resources.yaml
variables: variables.yaml
results:
  - policy: disallow-pvc
    rule: user-no-pvc
    resources:
      - pvc-skip
      - pvc-skip-paas
    kind: PersistentVolumeClaim
    result: skip
  - policy: disallow-pvc
    rule: user-no-pvc
    resources:
      - test-pass
    kind: Pod
    result: pass
  - policy: disallow-pvc
    rule: user-no-pvc
    resources:
      - pvc-fail
    kind: PersistentVolumeClaim
    result: fail
  - policy: disallow-pvc
    rule: disallow-pvc
    resources:
      - test-skip
      - paas-skip
    kind: Pod
    result: skip
  - policy: disallow-pvc
    rule: disallow-pvc
    resources:
      - test-pass
    kind: Pod
    result: pass
  - policy: disallow-pvc
    rule: disallow-pvc
    resources:
      - test-fail
    kind: Pod
    result: fail
  - policy: disallow-pvc
    rule: disallow-statefulset-pvc
    resources:
      - test-statefulset-skip
      - paas-statefulset-skip
    kind: StatefulSet
    result: skip
  - policy: disallow-pvc
    rule: disallow-statefulset-pvc
    resources:
      - test-statefulset-pass
    kind: StatefulSet
    result: pass
  - policy: disallow-pvc
    rule: disallow-statefulset-pvc
    resources:
      - test-statefulset-fail
    kind: StatefulSet
    result: fail
